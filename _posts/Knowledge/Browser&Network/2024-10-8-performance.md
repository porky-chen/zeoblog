---
title: Chrome Performance
author: zeo
categories: [知识点, 浏览器&网络]
tags: [Performance, 优化页面性能, 性能优化, Chrome DevTools]
render_with_liquid: false
---

在优化页面性能时，Chrome DevTools 的 Performance 面板提供了强大的分析工具，可以帮助定位和排查性能瓶颈。掌握该工具的使用，能够帮助开发者迅速判断页面性能问题，节省排查时间。

## **一、Chrome Performance 面板的核心功能**

Performance 面板的核心功能是**记录页面的运行情况**，包括主线程的执行过程、页面渲染、内存使用、网络请求、帧率等。通过这些数据，我们可以分析页面加载和运行中的性能瓶颈。
  
**常用功能介绍**

- **Timeline 视图**：按时间顺序记录页面的渲染、脚本执行和网络请求等操作。

- **Main (主线程)**：展示主线程中 JavaScript 执行的详情，可以看到函数调用、事件触发的时间。

- **Frames (帧)**：展示页面的帧率，帮助我们识别掉帧情况。

- **Screenshots (屏幕截图)**：记录加载过程中的关键页面截图，方便对比页面渲染效果。

- **Network (网络)**：记录资源请求的加载情况，帮助分析网络请求的耗时。

- **Memory (内存)**：展示内存占用情况，用于分析页面的内存泄漏和高内存使用问题。

## **二、使用 Chrome Performance 诊断页面性能问题**

1. **记录性能快照**

在 Performance 面板中点击“Record”按钮，操作页面后停止记录，查看整个加载过程和用户操作的性能数据。

- **Loading**：页面初次加载时间，包括资源加载、DOM 解析和渲染。

- **Scripting**：JavaScript 执行时间，可以帮助找到脚本的耗时瓶颈。

- **Rendering**：页面绘制和样式计算时间，用于判断布局和绘制的效率。

- **Idle**：空闲时间，若过少说明页面在持续执行任务，影响流畅性。

2. **判断页面性能瓶颈的常见指标**

- **Load Time (加载时间)**：页面从请求到完全加载的时间。可以从 DOMContentLoaded 和 load 事件的时间节点判断。

- **Blocking Time (阻塞时间)**：指页面加载过程中 JavaScript 或 CSS 阻塞渲染的时间。可以检查资源加载是否阻塞。

- **Long Task (长任务)**：通常超过 50 毫秒的任务会被标记为长任务，是导致页面卡顿的主要原因。

- **First Contentful Paint (FCP) 和 Largest Contentful Paint (LCP)**：反映页面首屏内容和主要内容加载时间。时间较长可能表明资源加载问题。

- **First Input Delay (FID)**：用户交互的响应延迟，表示用户点击或输入后的等待时间。

## **三、常见页面性能问题及快速定位方法**

**1. 网络请求瓶颈**  

**现象**：页面加载缓慢、资源请求耗时长、数据未及时加载。

**快速定位**：

- **Network 面板**：查看资源加载顺序、阻塞的请求、请求时间及其大小。

- **瀑布流分析**：重点关注 CSS、JavaScript 是否阻塞渲染；如果 CSS 和 JS 文件加载耗时过长，可考虑压缩、合并文件，或使用 CDN。

**2. 脚本执行耗时**

**现象**：页面响应缓慢或操作卡顿，主线程占用时间过长。

**快速定位**：

- **Main 线程**：在 Performance 的 Main 线程中，找到高耗时的 JavaScript 函数，观察是否有过多计算或循环。

- **Timeline Analysis**：检查 JavaScript 执行时间，标记出长时间运行的函数，优化算法，减少不必要的计算。

**3. 页面布局和重绘问题**

**现象**：页面滚动卡顿、用户交互时页面卡顿、频繁重排和重绘。

**快速定位**：


- **Rendering 记录**：查看 Paint 和 Layout 时间过多的部分，频繁的布局（Layout）和重绘（Repaint）会导致卡顿。

- **CSS 优化**：检查是否有频繁更改影响布局的属性（如 width、height），改为影响较小的 transform 等属性。

**4. 大量 DOM 操作**

**现象**：页面交互响应时间慢，尤其是大量 DOM 操作的页面。

**快速定位**：

- **DOM 树分析**：检查页面是否存在过多的 DOM 操作，或有深层次的嵌套。

- **批量更新 DOM**：尽量减少直接操作 DOM 次数，可以使用文档片段或虚拟 DOM 优化。

**5. 内存泄漏和高内存占用**

**现象**：页面在长时间运行后卡顿，甚至出现崩溃。

**快速定位**：

- **Memory 面板**：使用“Heap Snapshot”快照对比页面内存占用情况，查看是否有未释放的对象。

- **Timeline Records**：观察是否存在持续增加的内存使用，标记出造成内存泄漏的对象。

## **四、减少性能问题排查时间的策略**

1. **使用快捷模式记录**：Performance 面板的 **“Quick Record”** 可捕捉加载过程和常见交互，减少记录数据量。

2. **聚焦主线程**：将分析重点放在主线程的任务，避免过多的长任务（超过 50 毫秒的任务），快速找到耗时高的 JavaScript 函数。

3. **关注关键指标**：优先分析 FCP、LCP、FID 等关键指标的性能数据，观察 Timeline 中是否存在掉帧、长任务、内存泄漏等问题。

4. **分阶段排查**：先从页面加载分析，排查是否有网络问题，再进入交互阶段检查脚本、布局和渲染问题。

5. **定期代码审查与优化**：养成在开发中定期审查代码，精简不必要的依赖、优化重复计算和 DOM 操作，避免性能问题在后期积累。

## **五、总结**

借助 Chrome Performance 面板，可以清晰地查看页面加载的各个环节，并快速定位到页面性能瓶颈。通过合理利用网络请求优化、减少主线程负担、减少 DOM 操作频率和管理内存使用，我们可以有效提升页面性能和用户体验。